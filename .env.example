# ==========================================
# ATHYPER RUNTIME CONFIGURATION
# ==========================================

# ==========================================
# Runtime Bootstrap
# ==========================================
ENVIRONMENT=local
NODE_ENV=local
MODE=api
SERVICE_NAME=athyper-runtime
PORT=3000

# ==========================================
# Logging & Lifecycle
# ==========================================
LOG_LEVEL=info
SHUTDOWN_TIMEOUT_MS=15000
PUBLIC_BASE_URL=http://localhost:3000

# ==========================================
# Configuration File Path
# ==========================================
# ATHYPER_KERNEL_CONFIG_PATH is resolved relative to MESH_CONFIG (if set)
# or process.cwd(). For local dev, the relative path below works on all OS.
ATHYPER_KERNEL_CONFIG_PATH=mesh/config/apps/athyper/kernel.config.local.parameter.json
# MESH_CONFIG is optional when using a full relative path above.
# If set, ATHYPER_KERNEL_CONFIG_PATH resolves relative to it.
# MESH_CONFIG=/path/to/mesh/config

# ==========================================
# Database (Standard ENV)
# ==========================================
# These can be set via standard env vars or overridden by SUPERSTAR
DATABASE_URL=postgresql://athyper_user:athyperadmin@localhost:6432/athyper_dev1
DATABASE_ADMIN_URL=postgresql://athyper_user:athyperadmin@localhost:5432/athyper_dev1
DB_POOL_MAX=10

# ==========================================
# Database (SUPERSTAR - Production Only)
# ==========================================
# Use SUPERSTAR env vars in production to override database config
# These have highest precedence and cannot be set via config files
# ATHYPER_SUPER__DATABASE_URL=
# ATHYPER_SUPER__DATABASE_ADMIN_URL=

# ==========================================
# Redis Cache (Standard ENV)
# ==========================================
REDIS_URL=redis://:athyperadmin@localhost:6379/0

# ==========================================
# Redis (SUPERSTAR - Production Only)
# ==========================================
# ATHYPER_SUPER__REDIS_URL=

# ==========================================
# S3 / Object Storage (Standard ENV)
# ==========================================
# S3 config is LOCKED from JSON config files (secrets must not be committed),
# but standard env vars below work fine for local development.
# For production, use SUPERSTAR env vars (ATHYPER_SUPER__S3_*) instead.
S3_ENDPOINT=https://objectstorage.mesh.athyper.local
S3_ACCESS_KEY=athyperadmin
S3_SECRET_KEY=athyperadmin
S3_REGION=us-east-1
S3_BUCKET=athyper-local
S3_USE_SSL=true

# ==========================================
# S3 (SUPERSTAR - Production Only)
# ==========================================
# ATHYPER_SUPER__S3_ENDPOINT=https://s3.amazonaws.com
# ATHYPER_SUPER__S3_ACCESS_KEY=your-access-key
# ATHYPER_SUPER__S3_SECRET_KEY=your-secret-key
# ATHYPER_SUPER__S3_REGION=us-east-1
# ATHYPER_SUPER__S3_BUCKET=athyper
# ATHYPER_SUPER__S3_USE_SSL=true

# ==========================================
# IAM / Identity & Access Management (LOCKED)
# ==========================================
# IAM strategy and defaults are LOCKED
# ATHYPER_SUPER__IAM_STRATEGY=single_realm
# ATHYPER_SUPER__IAM_DEFAULT_REALM=main
# ATHYPER_SUPER__IAM_DEFAULT_TENANT=
# ATHYPER_SUPER__IAM_DEFAULT_ORG=

# ==========================================
# IAM Client Secrets (SUPERSTAR)
# ==========================================
# Client secrets are referenced in kernel config JSON via clientSecretRef
# Pattern: ATHYPER_SUPER__IAM_SECRET__<REF_NAME>
# Local dev Keycloak client secret (matches mesh setup):
ATHYPER_SUPER__IAM_SECRET__IAM_ATHYPER_CLIENT_SECRET=athyperadmin

# ==========================================
# Telemetry / Observability
# ==========================================
# ATHYPER_SUPER__OTLP_ENDPOINT=http://localhost:4318
# ATHYPER_SUPER__TELEMETRY_ENABLED=true

# ==========================================
# Local Development (TLS)
# ==========================================
# MESH uses self-signed TLS certs via Traefik. Set this to allow
# Node.js to connect to HTTPS services (MinIO S3, Keycloak) locally.
# DO NOT use in staging/production.
NODE_TLS_REJECT_UNAUTHORIZED=0

# ==========================================
# NOTES
# ==========================================
# 1. SUPERSTAR Variables (ATHYPER_SUPER__*):
#    - Highest precedence (override everything)
#    - Use for production secrets and infrastructure wiring
#    - Cannot be set via config files (LOCKED)
#
# 2. Locked Configuration Paths:
#    - db.url, db.adminUrl
#    - redis.url
#    - All s3.* paths
#    - iam.strategy, iam.defaultRealmKey, iam.defaultTenantKey, iam.defaultOrgKey
#    - telemetry.otlpEndpoint, telemetry.enabled
#
# 3. For local development, use standard env vars or kernel config JSON
# 4. For production, use SUPERSTAR env vars for all secrets
# 5. See docs/deployment/ for comprehensive documentation
