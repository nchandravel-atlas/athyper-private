# ========================================================
# athyper Mesh Local Dev DB tuning
# Lightweight config for Docker-based local development
# ========================================================

# ---- Networking (Docker container â€” listen on all interfaces)
listen_addresses = '*'
port = 5432

# ---- Authentication
password_encryption = scram-sha-256

# ---- Connections (low for local dev)
max_connections = 50
superuser_reserved_connections = 3

# ---- Memory (conservative for local dev)
shared_buffers = 256MB
effective_cache_size = 512MB
work_mem = 4MB
maintenance_work_mem = 128MB

# ---- WAL / Checkpoints
checkpoint_completion_target = 0.9
max_wal_size = 1GB
min_wal_size = 256MB
wal_compression = on

# ---- Planner / IO
random_page_cost = 1.1
effective_io_concurrency = 200

# ---- Autovacuum
autovacuum_max_workers = 2
autovacuum_naptime = 60s
autovacuum_vacuum_scale_factor = 0.10
autovacuum_analyze_scale_factor = 0.05

# ---- Logging
log_line_prefix = '%m [%p] %q%u@%d '
log_timezone = 'UTC'
timezone = 'UTC'
log_min_duration_statement = 500ms
log_checkpoints = on
log_autovacuum_min_duration = 5s
